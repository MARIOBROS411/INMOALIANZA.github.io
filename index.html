<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <meta
      name="description"
      content="Inmoalianza - El mejor aliado en tu financiamiento de casas"
    />
    <meta name="robots" content="index, follow" />
    <title>
      Inmoalianza &#8211; El mejor aliado en tu financiamiento de casas
    </title>
    <link
      rel="icon"
      href="https://inmoalianza.ec/wp-content/uploads/2023/06/cropped-Flechas-32x32.png"
      type="image/png"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      * {
        box-sizing: border-box;
      }

      body {
        font-family: Arial, sans-serif;
        background-color: #093a56;
        color: #f4f7fa;
        padding: 20px;
        margin: 0;
        min-height: 100vh;
      }

      /* Video de fondo */
      .video-background {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        overflow: hidden;
      }

      .video-background video {
        min-width: 100%;
        min-height: 100%;
        object-fit: cover;
      }

      .video-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(9, 58, 86, 0.7);
        z-index: -1;
      }

      header {
        width: 100%;
        margin: 0 auto 20px auto;
        text-align: center;
      }

      header img {
        max-height: 100px;
        width: auto;
        max-width: 100%;
        border-radius: 10px;
        object-fit: contain;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        display: block;
        margin: 0 auto;
        background-color: #093a56;
        padding: 10px;
      }

      /* Estilo unificado para los títulos principales */
      .titulo-principal,
      .footer-text {
        text-align: center;
        color: #caf0f8;
        margin: 15px 0;
        font-size: clamp(1.5rem, 4vw, 2rem);
        font-weight: 300;
        letter-spacing: 1px;
        text-transform: uppercase;
        position: relative;
        display: inline-block;
        width: 100%;
      }

      .titulo-principal::after,
      .footer-text::after {
        content: '';
        position: absolute;
        bottom: -8px;
        left: 50%;
        transform: translateX(-50%);
        width: 60%;
        height: 2px;
        background: linear-gradient(90deg, transparent, #caf0f8, transparent);
      }

      .contenedor-flex {
        display: flex;
        flex-direction: column;
        gap: 20px;
        justify-content: center;
        align-items: center;
        margin-bottom: 20px;
      }

      @media (min-width: 768px) {
        .contenedor-flex {
          flex-direction: row;
          align-items: flex-start;
          gap: 30px;
        }
      }

      .formulario,
      .resultado {
        width: 100%;
        max-width: 100%;
        background-color: rgba(255, 255, 255, 0.85);
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
        color: #1d3557;
      }

      @media (min-width: 768px) {
        .formulario {
          width: 320px;
        }
        .resultado {
          width: 400px;
        }
      }

      .formulario label {
        font-size: 14px;
        margin-top: 8px;
        display: block;
      }

      .formulario input,
      .formulario select {
        width: 100%;
        padding: 8px 10px;
        margin: 6px 0 12px 0;
        border-radius: 5px;
        border: 1px solid #ccc;
        font-size: 14px;
      }

      .resultado {
        position: relative;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        align-items: center;
        opacity: 0;
        transform: translateY(20px);
        pointer-events: none;
      }

      .resultado.show {
        animation: fadeSlideIn 0.5s forwards;
        pointer-events: auto;
      }

      @keyframes fadeSlideIn {
        0% {
          opacity: 0;
          transform: translateY(20px);
        }
        100% {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .datos {
        width: 100%;
        font-size: 14px;
      }

      @media (min-width: 768px) {
        .resultado {
          flex-direction: row;
        }
        .datos {
          width: 50%;
          min-width: 180px;
        }
      }

      canvas {
        width: 150px !important;
        height: 150px !important;
        margin: 10px auto;
        display: block;
      }

      .texto-centro-grafico {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 150px;
        height: 150px;
        pointer-events: none;
        display: flex;
        justify-content: center;
        align-items: center;
        color: black;
        font-family: Arial, sans-serif;
        font-weight: normal;
        user-select: none;
        text-align: center;
        font-size: 14px;
        line-height: 1.3;
        background: transparent;
      }

      .entrada-valor {
        margin-top: 8px;
        font-size: 16px;
        color: rgb(33, 26, 136);
        text-align: center;
        font-weight: 600;
      }

      .interesporcentaje {
        margin-top: 8px;
        font-size: 10px;
        color: rgba(0, 2, 136, 1);
        text-align: center;
        font-weight: 600;
      }

      .boton-container {
        text-align: center;
        margin: 20px 0;
      }

      button {
        background-color: #0077b6;
        color: white;
        font-weight: bold;
        cursor: pointer;
        padding: 12px 30px;
        font-size: 16px;
        border-radius: 6px;
        border: none;
        transition: background-color 0.3s ease;
        width: 100%;
        max-width: 300px;
      }

      button:hover {
        background-color: #005f86;
      }

      .footer-container {
        text-align: center;
        margin-top: 30px;
        padding: 20px 0;
      }

      .footer-text {
        font-size: clamp(1rem, 3vw, 1.2rem);
        margin: 0;
      }

      /* Sección de enlace */
      .enlace-container {
        text-align: center;
        margin: 30px 0;
        padding: 20px;
        transition: all 0.5s ease;
        cursor: pointer;
      }

      .enlace-imagen {
        max-width: 100%;
        height: auto;
        margin: 0 auto 15px;
        transition: all 0.3s ease;
        transform: scale(1);
        filter: brightness(1);
      }

      .enlace-imagen:hover {
        transform: scale(1.05);
        filter: brightness(1.1);
      }

      .enlace-imagen:active {
        transform: scale(0.98);
      }

      .enlace-texto {
        color: white;
        font-size: clamp(1.2rem, 4vw, 1.8rem);
        margin-bottom: 15px;
        transition: all 0.3s ease;
        font-family: 'Arial', sans-serif;
        font-weight: 300;
        letter-spacing: 1px;
        text-transform: uppercase;
        position: relative;
        display: inline-block;
        padding-bottom: 8px;
      }

      .enlace-texto::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 60%;
        height: 2px;
        background: linear-gradient(90deg, transparent, #ffffff, transparent);
        transition: all 0.3s ease;
      }

      .enlace-container:hover .enlace-texto::after {
        width: 80%;
        background: linear-gradient(90deg, transparent, #caf0f8, transparent);
      }

      .enlace-container:hover .enlace-texto {
        text-shadow: 0 0 15px rgba(202, 240, 248, 0.7);
        color: #caf0f8;
      }

      .enlace-flecha {
        font-size: 24px;
        color: white;
        cursor: pointer;
        animation: bounce 2s infinite;
        transition: all 0.3s ease;
      }

      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-10px);
        }
        60% {
          transform: translateY(-5px);
        }
      }

      /* Redes sociales flotantes */
      .redes-sociales {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 999;
        display: flex;
        flex-direction: column;
      }

      .redes-sociales a {
        margin: 5px;
      }

      .redes-sociales img {
        width: 40px;
        height: 40px;
      }

      @media (max-width: 480px) {
        .redes-sociales img {
          width: 35px;
          height: 35px;
        }
      }

      /* Estilo para mensajes de error */
      .error-message {
        color: #dc3545;
        font-size: 12px;
        margin-top: -10px;
        margin-bottom: 10px;
        display: none;
      }
    </style>
  </head>
  <body>
    <!-- Fondo animado -->
    <div class="video-background">
      <video autoplay muted loop playsinline>
        <source
          src="https://inmoalianza.ec/wp-content/uploads/2024/12/ghetto-in-america-poor-inner-city-urban-residenti-2023-11-27-04-59-42-utc-1.mov"
          type="video/mp4"
        />
      </video>
    </div>
    <div class="video-overlay"></div>

    <header>
      <img src="inmoalianza.jpg" alt="Inmoalianza Logo" />
    </header>

    <h1 class="titulo-principal">Lo que pagarías mensualmente por tu vivienda con INMOALIANZA</h1>

    <div class="contenedor-flex">
      <div class="formulario">
        <label for="nombres">Nombres:</label>
        <input type="text" id="nombres" placeholder="Ingrese sus nombres" />
        <label for="apellidos">Apellidos:</label>
        <input type="text" id="apellidos" placeholder="Ingrese sus apellidos" />
        <label for="cedula">Cédula:</label>
        <input
          type="text"
          id="cedula"
          placeholder="Ingrese su cédula"
          maxlength="10"
        />
        <div id="cedula-error" class="error-message"></div>

        <label for="monto">Valor de la propiedad:</label>
        <select id="monto">
          <option value="20000">20,000</option>
          <option value="30000">30,000</option>
          <option value="40000">40,000</option>
          <option value="50000">50,000</option>
          <option value="60000">60,000</option>
          <option value="70000">70,000</option>
          <option value="80000">80,000</option>
          <option value="90000">90,000</option>
          <option value="100000">100,000</option>
        </select>

        <label for="plazo">Plazo (años):</label>
        <select id="plazo">
          <option value="5">5 Años/60 meses</option>
          <option value="10">10 Años/ 120 meses</option>
          <option value="15">15 Años/ 180 meses</option>
        </select>
      </div>

      <div class="resultado" id="resultado">
        <div class="datos">
          <h2>Resultado</h2>
          <p><strong>Cliente:</strong> <span id="cliente"></span></p>
          <p><strong>Cédula:</strong> <span id="doc"></span></p>
          <p><strong>Monto:</strong> $<span id="montoResultado"></span></p>
          <p><strong>Plazo:</strong> <span id="plazoResultado"></span> años</p>
          <p><strong>Cuota mensual:</strong> $<span id="cuotaMensual"></span></p>
        </div>

        <div
          style="
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
          "
        >
          <canvas id="graficoCuota"></canvas>
          <div
            class="texto-centro-grafico"
            id="textoCentroGrafico"
            aria-hidden="true"
          >
            <div class="cuota">Cuota mensual: $0</div>
          </div>
          <div class="entrada-valor" id="valorEntrada"></div>
        </div>
      </div>
    </div>

    <div class="boton-container">
      <button onclick="simular()">Calcular</button>
    </div>

    <!-- Sección de enlace -->
    <div class="enlace-container" onclick="window.location.href='index2.html'">
      <div class="enlace-texto">¿Deseas saber más sobre Inmoalianza?</div>
      <div class="enlace-flecha">↓</div>
      <img
        src="inmoalianzaenlace.jpg"
        alt="Más sobre Inmoalianza"
        class="enlace-imagen"
      />
    </div>

    <div class="footer-container">
      <div class="footer-text">Inmoalianza group S.A.S 2023 - 2025</div>
    </div>

    <script>
      // Función para validar cédula ecuatoriana
      function validarCedula(cedula) {
        // Verificar que tenga 10 dígitos y sean solo números
        if (cedula.length !== 10 || !/^\d+$/.test(cedula)) {
          return false;
        }

        // Los dos primeros dígitos deben corresponder a un provincia válida (01-24)
        const provincia = parseInt(cedula.substring(0, 2));
        if (provincia < 1 || provincia > 24) {
          return false;
        }

        // Algoritmo de validación (módulo 10)
        const digitos = cedula.split("").map(Number);
        const digitoVerificador = digitos.pop(); // Último dígito

        let suma = 0;

        for (let i = 0; i < digitos.length; i++) {
          let valor;
          if (i % 2 === 0) {
            valor = digitos[i] * 2;
            if (valor > 9) valor -= 9;
          } else {
            valor = digitos[i];
          }
          suma += valor;
        }

        const digitoCalculado = suma % 10 === 0 ? 0 : 10 - (suma % 10);

        return digitoVerificador === digitoCalculado;
      }

      // Función para mostrar error en el formulario
      function mostrarError(campo, mensaje) {
        const errorElement = document.getElementById(`${campo}-error`);
        errorElement.textContent = mensaje;
        errorElement.style.display = "block";
        document.getElementById(campo).style.borderColor = "#dc3545";
        return false;
      }

      // Función para limpiar errores
      function limpiarErrores() {
        const errors = document.querySelectorAll(".error-message");
        errors.forEach((error) => {
          error.textContent = "";
          error.style.display = "none";
        });

        const inputs = document.querySelectorAll(
          ".formulario input, .formulario select"
        );
        inputs.forEach((input) => {
          input.style.borderColor = "#ccc";
        });
      }

      // Cargar datos guardados al iniciar la página
      document.addEventListener("DOMContentLoaded", function () {
        if (localStorage.getItem("nombres")) {
          document.getElementById("nombres").value =
            localStorage.getItem("nombres");
          document.getElementById("apellidos").value =
            localStorage.getItem("apellidos");
          document.getElementById("cedula").value =
            localStorage.getItem("cedula");
          document.getElementById("monto").value =
            localStorage.getItem("monto");
          document.getElementById("plazo").value =
            localStorage.getItem("plazo");
        }

        // Validar cédula mientras se escribe
        document
          .getElementById("cedula")
          .addEventListener("input", function (e) {
            this.value = this.value.replace(/[^0-9]/g, "");
            if (this.value.length > 10) {
              this.value = this.value.slice(0, 10);
            }
          });
      });

      function simular() {
        limpiarErrores();

        const nombres = document.getElementById("nombres").value.trim();
        const apellidos = document.getElementById("apellidos").value.trim();
        const cedula = document.getElementById("cedula").value.trim();

        // Validaciones de campos obligatorios
        if (!nombres)
          return mostrarError("nombres", "Por favor ingrese sus nombres");
        if (!apellidos)
          return mostrarError("apellidos", "Por favor ingrese sus apellidos");
        if (!cedula)
          return mostrarError(
            "cedula",
            "Por favor ingrese su número de cédula"
          );

        // Validar formato de cédula
        if (cedula.length !== 10 || !/^\d+$/.test(cedula)) {
          return mostrarError(
            "cedula",
            "La cédula debe tener 10 dígitos numéricos"
          );
        }

        // Validar provincia
        const provincia = parseInt(cedula.substring(0, 2));
        if (provincia < 1 || provincia > 24) {
          return mostrarError(
            "cedula",
            "Los dos primeros dígitos no corresponden a una provincia válida"
          );
        }

        // Validar algoritmo de cédula
        if (!validarCedula(cedula)) {
          return mostrarError("cedula", "El número de cédula no es válido");
        }

        const monto = parseFloat(document.getElementById("monto").value);
        const plazo = parseInt(document.getElementById("plazo").value);
        const cuotas = {
          20000: { 5: 410, 10: 205, 15: 149.44 },
          30000: { 5: 615, 10: 307.5, 15: 224.17 },
          40000: { 5: 820, 10: 410, 15: 298.89 },
          50000: { 5: 1025, 10: 512.5, 15: 373.61 },
          60000: { 5: 1230, 10: 615, 15: 448.33 },
          70000: { 5: 1435, 10: 717.5, 15: 523.06 },
          80000: { 5: 1640, 10: 820, 15: 597.78 },
          90000: { 5: 1845, 10: 922.5, 15: 672.5 },
          100000: { 5: 2050, 10: 1025, 15: 747.22 },
        };

        const cuota = cuotas[monto][plazo];
        const entradaPorcentaje = 5.23 / 100;
        const valorEntrada = monto * entradaPorcentaje;

        function formatoNumero(num) {
          return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        document.getElementById(
          "cliente"
        ).textContent = `${nombres} ${apellidos}`;
        document.getElementById("doc").textContent = cedula;
        document.getElementById("montoResultado").textContent =
          formatoNumero(monto);
        document.getElementById("plazoResultado").textContent = plazo;
        document.getElementById("cuotaMensual").textContent = formatoNumero(cuota.toFixed(2));

        const resultado = document.getElementById("resultado");
        resultado.classList.remove("show");
        void resultado.offsetWidth;
        resultado.classList.add("show");

        const textoCentro = document.getElementById("textoCentroGrafico");
        textoCentro.querySelector(
          ".cuota"
        ).textContent = `Cuota mensual: $${formatoNumero(cuota.toFixed(2))}`;

        const ctx = document.getElementById("graficoCuota").getContext("2d");
        if (window.miGrafico) {
          window.miGrafico.destroy();
        }
        window.miGrafico = new Chart(ctx, {
          type: "doughnut",
          data: {
            labels: ["Cuota mensual", "Monto original"],
            datasets: [
              {
                data: [cuota, monto],
                backgroundColor: ["#000000", "#a8dadc"],
                borderWidth: 0,
                borderRadius: 0,
                spacing: 3,
              },
            ],
          },
          options: {
            plugins: {
              legend: { display: false },
              tooltip: {
                callbacks: {
                  label: function (ctx) {
                    const label = ctx.label || "";
                    const value = Number(ctx.raw).toLocaleString("en-US", {
                      minimumFractionDigits: 2,
                      maximumFractionDigits: 2,
                    });
                    return `${label}: $${value}`;
                  },
                },
              },
            },
            cutout: "70%",
          },
        });

        guardarDatosFormulario();
      }

      function guardarDatosFormulario() {
        const nombres = document.getElementById("nombres").value;
        const apellidos = document.getElementById("apellidos").value;
        const cedula = document.getElementById("cedula").value;
        const monto = document.getElementById("monto").value;
        const plazo = document.getElementById("plazo").value;

        localStorage.setItem("nombres", nombres);
        localStorage.setItem("apellidos", apellidos);
        localStorage.setItem("cedula", cedula);
        localStorage.setItem("monto", monto);
        localStorage.setItem("plazo", plazo);
      }
    </script>
  </body>
</html>


